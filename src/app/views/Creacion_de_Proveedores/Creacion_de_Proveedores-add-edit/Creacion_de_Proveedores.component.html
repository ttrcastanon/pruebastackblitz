<section class="content">
  <div class="container-fluid">
    <div class="block-header">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <ul class="breadcrumb breadcrumb-style ">
            <li class="breadcrumb-item">
              <h4 class="page-title">Catálogo de Proveedores</h4>
            </li>
            <li class="breadcrumb-item bcrumb-1">
              <a routerLink="/dashboard/main">
                <i class="fas fa-home"></i> Inicio</a>
            </li>
            <li class="breadcrumb-item bcrumb-2">
			  <a routerLink="/Creacion_de_Proveedores/list">Catálogo de Proveedores</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="flex-row clearfix">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
        <div class="card">
          <div class="body">
            <ngx-spinner name="loading" type="ball-spin-fade" fullScreen="false">
                <p style="color: white">Procesando</p>
            </ngx-spinner>
            <form class="m-4" [formGroup]="Creacion_de_ProveedoresForm" (ngSubmit)="save()">
              <mat-tab-group #tabGroup>
<mat-tab aria-label="Datos_Generales" label="Datos Generales"> <br> <div id="tabDatos_Generales" class="row">
                    <div id="divClave" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Clave</mat-label>
                        <input matInput formControlName="Clave" [type]="Creacion_de_ProveedoresForm.get('Clave').value == 'Auto' ? 'text':'number'" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Clave').hasError('required')">
                          Clave es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div id="divID_Dynamics" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>ID Dynamics</mat-label>
                        <input (change)="ID_Dynamics_ExecuteBusinessRules()" #ID_Dynamics matInput formControlName="ID_Dynamics" type="text" maxlength="50" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('ID_Dynamics').hasError('required')">
                          ID Dynamics  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divRazon_social" class="col-xl-3 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Razón social</mat-label>
                        <input (change)="Razon_social_ExecuteBusinessRules()" #Razon_social matInput formControlName="Razon_social" type="text" maxlength="75" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Razon_social').hasError('required')">
                          Razón social  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divRFC" class="col-xl-3 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>RFC</mat-label>
                        <input (change)="RFC_ExecuteBusinessRules()" #RFC matInput formControlName="RFC" placeholder="AAAA000000AAA/AAA000000AA" mask="SSSA00000AAA||SSSA000000AAA" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('RFC').hasError('required')">
                          RFC  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divContacto" class="col-xl-3 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Contacto</mat-label>
                        <input (change)="Contacto_ExecuteBusinessRules()" #Contacto matInput formControlName="Contacto" type="text" maxlength="75" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Contacto').hasError('required')">
                          Contacto  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divCorreo_electronico" class="col-xl-3 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Correo electrónico</mat-label>
                        <input (change)="Correo_electronico_ExecuteBusinessRules()" (change)="validateEmail()"
                         #Correo_electronico  matInput formControlName="Correo_electronico" type="email"  [email]="true"  maxlength="50" required />                      
                        <mat-error
                          *ngIf="Creacion_de_ProveedoresForm.get('Correo_electronico').hasError('required') || Creacion_de_ProveedoresForm.get('Correo_electronico').invalid">
                          <span *ngIf="!emailEnpty">Correo electrónico es requerido</span>
                          <span *ngIf="emailEnpty">Correo electrónico invalido</span>
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divDireccion_fiscal" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Dirección fiscal</mat-label>
                        <input (change)="Direccion_fiscal_ExecuteBusinessRules()" #Direccion_fiscal matInput formControlName="Direccion_fiscal" type="text" maxlength="250" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Direccion_fiscal').hasError('required')">
                          Dirección fiscal  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divDireccion_postal" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Dirección postal</mat-label>
                        <input (change)="Direccion_postal_ExecuteBusinessRules()" #Direccion_postal matInput formControlName="Direccion_postal" type="text" maxlength="250" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Direccion_postal').hasError('required')">
                          Dirección postal  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divTelefono_de_contacto" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Teléfono de contacto </mat-label>
                        <input (change)="Telefono_de_contacto_ExecuteBusinessRules()" #Telefono_de_contacto matInput formControlName="Telefono_de_contacto" type="text" maxlength="15" placeholder="(XXX) XXX-XXXX" mask="(000) 000-0000"  required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Telefono_de_contacto').hasError('required')">
                          Teléfono de contacto   es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divEstatus" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Estatus</mat-label>
                        <mat-select (selectionChange)="Estatus_ExecuteBusinessRules()" placeholder="Estatus" formControlName="Estatus" required>
                          <mat-option>

                          </mat-option>
                          <mat-option *ngFor="let item of varEstatus_de_Proveedor" [value]="item.Clave">
                            {{ item.Descripcion }}
                          </mat-option>
                        </mat-select>
						<mat-error *ngIf="Creacion_de_ProveedoresForm.get('Estatus').hasError('required')">
                          Estatus es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divTiempo_de_pagos_negociado" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline"  >
                        <mat-label>Tiempo de pagos negociado (Numero de Días)</mat-label>
                        <input (change)="Tiempo_de_pagos_negociado_ExecuteBusinessRules()" matInput formControlName="Tiempo_de_pagos_negociado" [type]="Creacion_de_ProveedoresForm.get('Tiempo_de_pagos_negociado').value == 'Auto'  ? 'text':'number' " mask="000" required />
                        <mat-error *ngIf="Creacion_de_ProveedoresForm.get('Tiempo_de_pagos_negociado').hasError('required')">
                          Tiempo de pagos negociado (Numero de Días)  es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divTipo_de_proveedor" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Tipo de proveedor</mat-label>
                        <mat-select (selectionChange)="Tipo_de_proveedor_ExecuteBusinessRules()" placeholder="Tipo de proveedor" formControlName="Tipo_de_proveedor" required>
                          <mat-option>

                          </mat-option>
                          <mat-option *ngFor="let item of varTipos_de_proveedor" [value]="item.Clave">
                            {{ item.Descripcion }}
                          </mat-option>
                        </mat-select>
						<mat-error *ngIf="Creacion_de_ProveedoresForm.get('Tipo_de_proveedor').hasError('required')">
                          Tipo de proveedor es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divSe_realizo_auditoria" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>¿Se realizó auditoria?</mat-label>
                        <mat-select (selectionChange)="Se_realizo_auditoria_ExecuteBusinessRules()" placeholder="¿Se realizó auditoria?" formControlName="Se_realizo_auditoria" required>
                          <mat-option>

                          </mat-option>
                          <mat-option *ngFor="let item of varRespuesta" [value]="item.Clave">
                            {{ item.Descripcion }}
                          </mat-option>
                        </mat-select>
						<mat-error *ngIf="Creacion_de_ProveedoresForm.get('Se_realizo_auditoria').hasError('required')">
                          ¿Se realizó auditoria? es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divClasificacion_de_proveedor" class="col-xl-6 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width no-padding" appearance="outline">
                        <mat-label>Clasificación de proveedor</mat-label>
                        <mat-select (selectionChange)="Clasificacion_de_proveedor_ExecuteBusinessRules()" placeholder="Clasificación de proveedor" formControlName="Clasificacion_de_proveedor" required>
                          <mat-option>

                          </mat-option>
                          <mat-option *ngFor="let item of varClasificacion_de_proveedores" [value]="item.Clave">
                            {{ item.Descripcion }}
                          </mat-option>
                        </mat-select>
						<mat-error *ngIf="Creacion_de_ProveedoresForm.get('Clasificacion_de_proveedor').hasError('required')">
                          Clasificación de proveedor es requerido
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div id="divCargar_acuerdo" class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <mat-form-field *ngIf="Cargar_acuerdoName == '' && !Creacion_de_ProveedoresForm.disabled" class="example-full-width no-padding" appearance="outline" >
                        <mat-label>Cargar acuerdo</mat-label>
                        <ngx-mat-file-input #removableInput formControlName="Cargar_acuerdoFile" required>
                        </ngx-mat-file-input>
                        <button type="button" mat-icon-button matSuffix *ngIf="!removableInput.empty"
                          (click)="removableInput.clear($event)">
                          <mat-icon>clear</mat-icon>
                        </button>
						<mat-error *ngIf="Creacion_de_ProveedoresForm.get('Cargar_acuerdoFile').hasError('required')">
                          Cargar acuerdo es requerido
                        </mat-error>
                      </mat-form-field>
                      <div *ngIf="Cargar_acuerdoName != '' ">
                        <mat-label>Cargar acuerdo</mat-label>
                        <a href="{{Cargar_acuerdoUrl()}}"  target="_blank">
                          {{Cargar_acuerdoName }} 
                        </a>
                        <button mat-icon-button (click)="removeCargar_acuerdo()" *ngIf="!Creacion_de_ProveedoresForm.disabled" >
                          <mat-icon aria-label="eliminar">close</mat-icon>
                        </button>
                      </div>
                    </div>

                </div>
                </mat-tab>
              </mat-tab-group>
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                  <button  class="mr-3 mb-2" [disabled]="!Creacion_de_ProveedoresForm.valid || consult" mat-raised-button
                    color="primary">Guardar 
                  </button>
                  <button type='button' class="mr-3 mb-2" (click)="saveAndNew()" [disabled]="!Creacion_de_ProveedoresForm.valid || consult"
                    mat-raised-button color="primary"hidden>Guardar y Nuevo
                  </button>
                  <button type='button' class="mr-3 mb-2" (click)="saveAndCopy()" [disabled]="!Creacion_de_ProveedoresForm.valid || consult"
                    mat-raised-button color="primary"hidden>Guardar y Copia
                  </button>
                  <button [hidden]="!hasPermision('Configure')" class="mr-3 mb-2" [disabled]="!Creacion_de_ProveedoresForm.valid || consult" mat-raised-button color="primary">Configurar </button>
                  <button type="button" class="mb-2"  mat-raised-button color="basic" (click)="goToList()" mat-button>Cancelar</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div id="snackbar"></div>
